(function($R)
{
    $R.add('plugin', 'imagebox', {
        init: function(app)
        {
            // define app
            this.app = app;
            this.opts = app.opts;
        },
      
        onmodal: {
           // modal: {
                open: function($modal, $form)
                {
                    //console.log($modal);console.log($form);
                }
            //}
        },

        // messages
        onimage: {
            uploaded: function(image, json)
            {
                if (this.opts.imageBoxAttr) {
                    var $img = $R.dom(image).find('img[data-image]');
                    var link = document.createElement('a');

                    link.href = $img.attr('src');
                    link.setAttribute(this.opts.imageBoxAttr, (this.opts.imageBoxValue ? this.opts.imageBoxValue : true));

                    $img.wrap(link);    
                }
            },
            changed: function(image)
            {
               
            }
        }
    });
})(Redactor);